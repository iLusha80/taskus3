# План: Изменение кнопки "Автообновление" на переключатель с таймером

## Цель
Заменить существующую кнопку "Автообновление" в компоненте `BoardPage.jsx` на интерактивный переключатель (тумблер) с таймером обратного отсчета, показывающим время до следующего обновления. Интервал обновления будет фиксированным — 5 секунд.

## Текущая ситуация
*   Логика автообновления находится в `frontend-react/src/pages/BoardPage.jsx`.
*   Состояние `autoRefreshEnabled` (строка 53) управляет включением/выключением автообновления.
*   `useEffect` (строки 68-80) содержит `setInterval`, который вызывает `fetchColumns` каждые 5 секунд, если `autoRefreshEnabled` истинно.
*   Кнопка "Автообновление" находится в строках 240-242 `BoardPage.jsx`.
*   Компонент `frontend-react/src/components/Column.jsx` не содержит логики, связанной с автообновлением.

## Подробный план реализации

### 1. Создание нового компонента `AutoRefreshToggle`
*   **Файл:** `frontend-react/src/components/AutoRefreshToggle.jsx`
*   **Функциональность:**
    *   Компонент будет содержать логику для переключателя (тумблера) и отображения таймера обратного отсчета.
    *   Будет принимать следующие пропсы:
        *   `autoRefreshEnabled`: булево значение, указывающее, включено ли автообновление.
        *   `setAutoRefreshEnabled`: функция для изменения состояния `autoRefreshEnabled`.
        *   `refreshInterval`: число, указывающее интервал обновления в миллисекундах (фиксировано 5000 мс).
        *   `onRefresh`: колбэк, который будет вызываться при каждом обновлении (для сброса таймера).
    *   Внутри компонента будет использоваться `useState` для отслеживания оставшихся секунд до следующего обновления.
    *   `useEffect` будет использоваться для управления таймером обратного отсчета. Таймер будет сбрасываться до `refreshInterval / 1000` при включении автообновления или при вызове `onRefresh`.
    *   Будет использоваться `styled-components` для стилизации тумблера и текста таймера.

### 2. Интеграция `AutoRefreshToggle` в `BoardPage.jsx`
*   **Импорт:** Импортировать новый компонент `AutoRefreshToggle` в `BoardPage.jsx`.
*   **Замена:** Заменить существующую кнопку "Автообновление" (строки 240-242) на компонент `AutoRefreshToggle`.
*   **Передача пропсов:** Передать необходимые пропсы в `AutoRefreshToggle`:
    ```jsx
    <AutoRefreshToggle
      autoRefreshEnabled={autoRefreshEnabled}
      setAutoRefreshEnabled={setAutoRefreshEnabled}
      refreshInterval={5000} // Фиксированный интервал
      onRefresh={fetchColumns} // Передаем fetchColumns для сброса таймера
    />
    ```
*   **Удаление:** Удалить логику отображения текста "Автообновление: Вкл/Выкл" из `BoardPage.jsx`, так как она будет перенесена в `AutoRefreshToggle`.

### 3. Модификация логики таймера в `BoardPage.jsx`
*   **Существующий `useEffect`:** Текущий `useEffect` в `BoardPage.jsx` (строки 68-80), который управляет `setInterval` для вызова `fetchColumns`, останется без изменений. Он будет продолжать отвечать за фактическое обновление данных.
*   **Взаимодействие:** `AutoRefreshToggle` будет получать информацию о том, когда произошло обновление, через пропс `onRefresh` (который будет `fetchColumns`), чтобы сбросить свой внутренний таймер обратного отсчета.

### 4. Стилизация
*   Добавить необходимые стили для `AutoRefreshToggle` с использованием `styled-components`, чтобы обеспечить его гармоничное встраивание в существующий дизайн приложения.

## Диаграмма потока данных

```mermaid
graph TD
    A[BoardPage.jsx] --> B{Состояние autoRefreshEnabled};
    B --> C[useEffect для setInterval];
    C --> D[fetchColumns()];
    A --> E[Рендер AutoRefreshToggle];
    E -- Пропсы --> F{Переключатель Вкл/Выкл};
    E -- Пропсы --> G[Таймер обратного отсчета];
    F -- Изменение состояния --> B;
    D -- Вызов onRefresh --> G;
```

## Следующие шаги
После подтверждения записи плана в Markdown, я предложу переключиться в режим "Код" для непосредственной реализации этих изменений.